<?php

namespace Database\Seeders;

use Illuminate\Database\Seeder;
use App\Models\Test;
use App\Models\TestQuestion;
use App\Models\TestQuestionOption;

class InterestMapSeeder extends Seeder
{
    public function run(): void
    {

        $test = Test::where('code', 'interests-map')->first();

        if (!$test) {
            $this->command->error('Тест "Карта интересов" не найден!');
            return;
        }


        $test->questions()->delete();
        $test->categories()->delete();

        $this->command->info("Удалены старые вопросы и категории для теста 'Карта интересов'");

        $questions = [
            'Читать технические журналы, смотреть передачи о конструкторских новинках?',
            'Читать книги, смотреть фильмы и передачи о детенах и космонавтах?',
            'Узнавать о достижениях в области строительства?',
            'Читать статьи в научных журналах, смотреть передачи о выдающихся спортсменах?',
            'Знакомиться с разнообразием форм жизни: микроорганизмы, растения, животные, человек?',
            'Знакомиться с различными странами, учитывая особенности их географического расположения?',
            'Читать или смотреть передачи о физических открытиях или о деятельности физиков?',
            'Узнавать об открытиях в химии или деятельности выдающихся химиков?',
            'Интересоваться историческими событиями и биографией исторических деятелей?',
            'Читать или смотреть передачи о работе врача?',
            'Решать занимательные, логические задачи, разгадывать математические головоломки?',
            'Изучать иностранный язык?',
            'Читать классические произведения отечественной и зарубежной литературы?',
            'Знакомиться с творчеством выдающихся музыкантов или актеров или художников?',
            'Интересоваться работой школы, деятельностью воспитателя, учителя, педагога?',
            'Читать статьи, книги по психологии?',
            'Интересоваться анатомией и физиологией человека?',
            'Смотреть телепередачи или читать о выдающихся событиях бизнеса, политики?',
            'Читать книги, смотреть фильмы о работе милиции, криминальные хроники?',
            'Интересоваться новыми достижениями в области информационных технологий?',
            'Интересоваться экономическими законами жизни общества?',
            'Интересоваться новыми достижениями области энергетики, машины, промышленности, медицины, космоса, сельского хозяйства?'
        ];

        foreach ($questions as $index => $questionText) {
            $question = TestQuestion::create([
                'test_id' => $test->id,
                'category_id' => null, // БЕЗ категорий!
                'question_text' => $questionText,
                'question_type' => 'scale',
                'order_index' => $index + 1,
                'is_required' => true,
            ]);


            for ($i = 1; $i <= 5; $i++) {
                TestQuestionOption::create([
                    'question_id' => $question->id,
                    'option_text' => (string)$i,
                    'option_value' => (string)$i,
                    'weight' => $i,
                    'order_index' => $i,
                ]);
            }
        }

        $this->command->info("Добавлено " . count($questions) . " вопросов для теста 'Карта интересов' с 5-балльной шкалой БЕЗ категорий.");
    }
}
